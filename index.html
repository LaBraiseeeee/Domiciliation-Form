<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Formulaire - Étapes 1 & 2</title>
  
  <!-- Font Awesome (icônes) -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    integrity="sha512-..."
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />

  <!-- Police : Nunito -->
  <link 
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600&display=swap"
  />

  <style>
    /* ------- RESET & BASE ------- */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: "Nunito", sans-serif;
      background: #f5f7fa;
      font-size: 16px;
      line-height: 1.5;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      padding: 20px;
    }

    /* -------- CONTENEUR GLOBAL -------- */
    .wrapper {
      width: 100%;
      max-width: 700px;
      margin-top: 60px;
    }

    /* ------ BARRE D'ÉTAPES EN HAUT ------ */
    .steps-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      position: relative;
    }
    .steps-container::before {
      content: '';
      position: absolute;
      width: 100%;
      height: 2px;
      background: #ddd;
      top: 17px;
      left: 0;
      z-index: -1;
    }
    .step-item {
      text-align: center;
      position: relative;
    }
    .step-num {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: 2px solid #ddd;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 14px;
      color: #888;
      font-weight: 500;
      margin: 0 auto 8px auto;
      transition: all 0.3s ease;
      background: #fff;
    }
    .step-title {
      font-size: 14px;
      color: #aaa;
      font-weight: 400;
      transition: color 0.3s ease;
    }
    .active .step-num {
      border-color: #000;
      background: #000;
      color: #fff;
    }
    .active .step-title {
      color: #000;
      font-weight: 600;
    }
    .completed .step-num {
      border-color: #000;
      background: #fff;
      color: #000;
    }
    .completed .step-title {
      color: #000;
      font-weight: 400;
    }

    /* ------- CONTENEUR FORMULAIRE ------- */
    .form-container {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 15px 30px rgba(0,0,0,0.1);
      max-width: 560px;
      padding: 40px 30px;
      margin: 0 auto;
    }
    .form-step {
      display: none;
    }
    .form-step.active {
      display: block;
    }

    .form-group {
      margin-bottom: 15px;
    }
    .input-container {
      position: relative;
    }
    .input-icon {
      position: absolute;
      left: 14px;
      top: 50%;
      transform: translateY(-50%);
      color: #888;
      font-size: 18px;
    }
    .form-control {
      width: 100%;
      /* Laisser la place à une icône à gauche (48px) si nécessaire. */
      padding: 14px 18px 14px 48px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 15px;
      transition: border-color 0.3s;
      font-family: "Nunito", sans-serif;
      text-align: left; /* Aligner le texte (placeholder) à gauche */
    }
    
    /* Style spécifique pour le select */
    select.form-control {
      text-align-last: left; /* Aligne le texte sélectionné et non sélectionné */
      -moz-text-align-last: left; /* Pour Firefox */
      text-align: left;
      padding-left: 18px; /* Pas d'icône pour le select, on réduit le padding gauche */
      padding-right: 40px; /* Espace pour la flèche */
      text-indent: 0;
    }
    
    /* Pour l'option sélectionnée qui reste à gauche aussi */
    select.form-control option {
      text-align: left;
    }
    
    .form-control::placeholder {
      color: #aaa;
      font-family: "Nunito", sans-serif;
      font-size: 15px;
      text-align: left; /* Bien aligné à gauche */
    }
    .form-control:focus {
      outline: none;
      border-color: #3a7bd5;
      background: #fafafa;
    }
    .error-wrap {
      min-height: 12px;
      margin-top: 2px;
    }
    .error-message {
      font-size: 12px;
      color: #e74c3c;
      visibility: hidden;
    }
    .error-message.visible {
      visibility: visible;
    }

    .btn {
      display: inline-block;
      background: #000;
      color: #fff;
      border: none;
      border-radius: 8px;
      width: 100%;
      padding: 16px 0;
      font-size: 16px;
      font-family: 'Nunito', sans-serif;
      font-weight: 400;
      cursor: pointer;
      transition: background 0.3s;
      text-align: center;
    }
    .btn:hover {
      background: #333;
    }
    .btn-center {
      margin-top: 12px;
    }
    .btn-secondary {
      background: #666;
      margin-right: 10px;
    }
    .btn-secondary:hover {
      background: #555;
    }
    .info-text {
      margin-top: 15px;
      font-size: 12px;
      color: #999;
      text-align: center;
      line-height: 1.4;
      font-family: "Nunito", sans-serif;
    }

    /* 2 blocs dans la partie 2, chaque bloc est une "card" */
    .form-block {
      margin-bottom: 40px;
    }
    .card {
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    .card-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 15px;
      color: #333;
      font-family: "Nunito", sans-serif;
    }

    /* Enlever l'apparence native du select + icône chevron à droite */
    select {
      appearance: none;
      -moz-appearance: none;
      -webkit-appearance: none;
      background: #fff;
    }
    .select-arrow {
      position: absolute;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 20px;
      color: #888;
      cursor: pointer;
      pointer-events: none; /* Permet au clic de passer au select */
    }
    
    /* Conteneur spécifique pour le select */
    .select-container {
      position: relative;
    }

    /* Radios en lignes distinctes, police identique */
    .radio-group label {
      display: block;
      margin-bottom: 8px;
      font-size: 15px;
      font-family: "Nunito", sans-serif;
      color: #444;
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <!-- Barre d'étapes -->
    <div class="steps-container" id="steps-bar">
      <div class="step-item active" data-step="1">
        <div class="step-num">1</div>
        <div class="step-title">ADRESSES</div>
      </div>
      <div class="step-item" data-step="2">
        <div class="step-num">2</div>
        <div class="step-title">INFORMATIONS</div>
      </div>
      <div class="step-item" data-step="3">
        <div class="step-num">3</div>
        <div class="step-title">OPTIONS</div>
      </div>
      <div class="step-item" data-step="4">
        <div class="step-num">4</div>
        <div class="step-title">PAIEMENT</div>
      </div>
      <div class="step-item" data-step="5">
        <div class="step-num">5</div>
        <div class="step-title">CONTRAT</div>
      </div>
    </div>

    <!-- Formulaire -->
    <div class="form-container">
      <form id="multi-step-form" novalidate>
        
        <!-- ÉTAPE 1 : ADRESSES (Ne pas modifier) -->
        <div class="form-step active" data-step="1">
          <!-- Email -->
          <div class="form-group">
            <div class="input-container">
              <i class="fa-solid fa-envelope input-icon"></i>
              <input
                type="text"
                id="email"
                class="form-control"
                placeholder="Votre email"
              />
            </div>
            <div class="error-wrap">
              <span class="error-message" id="error-email"></span>
            </div>
          </div>
          <!-- Téléphone -->
          <div class="form-group">
            <div class="input-container">
              <i class="fa-solid fa-phone input-icon"></i>
              <input
                type="text"
                id="telephone"
                class="form-control"
                placeholder="Votre numéro de téléphone"
              />
            </div>
            <div class="error-wrap">
              <span class="error-message" id="error-telephone"></span>
            </div>
          </div>
          <!-- Bouton Commencer -->
          <div class="btn-center">
            <button type="button" class="btn" id="btn-step1">COMMENCER</button>
          </div>
          <p class="info-text">
            Vos informations sont privées et ne seront pas transmises à des tiers
          </p>
        </div>

        <!-- ÉTAPE 2 : INFORMATIONS -->
        <div class="form-step" data-step="2">
          <!-- Bloc 1 : Forme + Nom société -->
          <div class="form-block">
            <div class="card">
              <div class="card-title">Informations sur la société</div>
              <!-- Sélecteur Forme juridique -->
              <div class="form-group">
                <div class="select-container">
                  <select id="forme-juridique" class="form-control">
                    <option value="">Sélectionnez une forme juridique</option>
                    <option value="Micro-entreprise">Micro-entreprise</option>
                    <option value="EI">EI</option>
                    <option value="EURL">EURL</option>
                    <option value="SASU">SASU</option>
                    <option value="SAS">SAS</option>
                    <option value="SARL">SARL</option>
                    <option value="SNC">SNC</option>
                    <option value="SCI">SCI</option>
                    <option value="SCP">SCP</option>
                    <option value="SCCV">SCCV</option>
                  </select>
                  <!-- Chevron à droite -->
                  <i class="fa-solid fa-chevron-down select-arrow" id="chevron-select"></i>
                </div>
                <div class="error-wrap">
                  <span class="error-message" id="error-forme"></span>
                </div>
              </div>
              <!-- Nom société -->
              <div class="form-group">
                <div class="input-container">
                  <i class="fa-solid fa-building input-icon"></i>
                  <input
                    type="text"
                    id="nom-societe"
                    class="form-control"
                    placeholder="Nom de votre société"
                  />
                </div>
                <div class="error-wrap">
                  <span class="error-message" id="error-nomsociete"></span>
                </div>
              </div>
            </div>
          </div>

          <!-- Bloc 2 : Société déjà créée ? -->
          <div class="form-block">
            <div class="card">
              <div class="card-title">Votre société est-elle déjà créée ?</div>
              <div class="form-group">
                <div class="radio-group">
                  <label>
                    <input type="radio" name="societe-cree" value="oui" />
                    Oui, je souhaite transférer le siège social
                  </label>
                  <label>
                    <input type="radio" name="societe-cree" value="non" />
                    Non, la société est en cours de création
                  </label>
                </div>
                <div class="error-wrap">
                  <span class="error-message" id="error-soccree"></span>
                </div>
              </div>
              <!-- Champ SIREN, affiché si "oui" -->
              <div class="form-group" id="siren-field" style="display:none; margin-top:5px;">
                <div class="input-container">
                  <i class="fa-solid fa-id-card input-icon"></i>
                  <input
                    type="text"
                    id="num-siren"
                    class="form-control"
                    placeholder="Numéro de SIREN"
                  />
                </div>
                <div class="error-wrap">
                  <span class="error-message" id="error-siren"></span>
                </div>
              </div>
            </div>
          </div>

          <!-- Boutons Étape 2 -->
          <div class="btn-center" style="display:flex; justify-content:flex-end;">
            <button type="button" class="btn-secondary btn" onclick="goToStep(1)">Précédent</button>
            <button type="button" class="btn" id="btn-step2">SUIVANT</button>
          </div>
        </div>

        <!-- Étape 3, 4, 5... hors exemple -->
      </form>
    </div>
  </div>

  <script>
    /* ----------------- GESTION DES ÉTAPES ----------------- */
    let currentStep = 1;
    const stepsBar = document.querySelectorAll(".step-item");
    const formSteps = document.querySelectorAll(".form-step");

    function showStep(stepNum) {
      formSteps.forEach(step => {
        const st = parseInt(step.getAttribute("data-step"), 10);
        step.classList.toggle("active", st === stepNum);
      });
      stepsBar.forEach(s => {
        const stepData = parseInt(s.getAttribute("data-step"), 10);
        s.classList.remove("active", "completed");
        if (stepData < stepNum) {
          s.classList.add("completed");
        } else if (stepData === stepNum) {
          s.classList.add("active");
        }
      });
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    function goToStep(stepNum) {
      currentStep = stepNum;
      showStep(stepNum);
    }

    // Init => ÉTAPE 1
    showStep(currentStep);

    // ----------------- ÉTAPE 1 : Validation -----------------
    const btnStep1 = document.getElementById("btn-step1");
    const email = document.getElementById("email");
    const phone = document.getElementById("telephone");
    const errEmail = document.getElementById("error-email");
    const errPhone = document.getElementById("error-telephone");

    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

    btnStep1.addEventListener("click", () => {
      errEmail.classList.remove("visible");
      errPhone.classList.remove("visible");

      let isValid = true;
      const emailVal = email.value.trim();
      const phoneVal = phone.value.trim();

      // Vérif email
      if (!emailVal) {
        errEmail.textContent = "Ce champ est requis";
        errEmail.classList.add("visible");
        isValid = false;
      } else if (!emailRegex.test(emailVal)) {
        errEmail.textContent = "Adresse e-mail invalide";
        errEmail.classList.add("visible");
        isValid = false;
      }

      // Vérif phone
      if (!phoneVal) {
        errPhone.textContent = "Ce champ est requis";
        errPhone.classList.add("visible");
        isValid = false;
      }

      if (isValid) {
        goToStep(2);
      }
    });

    // ----------------- ÉTAPE 2 : Validation + SIREN + Gestion du select -----------------
    const btnStep2 = document.getElementById("btn-step2");
    const formeJuridique = document.getElementById("forme-juridique");
    const chevronSelect = document.getElementById("chevron-select");
    const nomSociete = document.getElementById("nom-societe");
    const radios = document.getElementsByName("societe-cree");

    const errForme = document.getElementById("error-forme");
    const errNomSociete = document.getElementById("error-nomsociete");
    const errSocCree = document.getElementById("error-soccree");
    const errSiren = document.getElementById("error-siren");

    const sirenField = document.getElementById("siren-field");
    const numSiren = document.getElementById("num-siren");

    // Mise à jour : Dès qu'une forme juridique est choisie, désactiver l'option par défaut
    formeJuridique.addEventListener("change", function() {
      if (this.value !== "") {
        const defaultOption = this.querySelector('option[value=""]');
        if (defaultOption) {
          defaultOption.disabled = true;
        }
      }
    });

    // Gestion du clic sur le conteneur du select (mise à jour pour éviter un double déclenchement)
    document.querySelector('.select-container').addEventListener('click', function(e) {
      if (e.target.tagName.toLowerCase() !== 'select') {
        formeJuridique.focus();
      }
    });

    // Afficher/Masquer le champ SIREN en fonction du choix de la radio
    function toggleSirenField() {
      const radioOui = document.querySelector('input[name="societe-cree"][value="oui"]');
      if (radioOui && radioOui.checked) {
        sirenField.style.display = "block";
      } else {
        sirenField.style.display = "none";
      }
    }
    radios.forEach(radio => {
      radio.addEventListener("change", toggleSirenField);
    });

    btnStep2.addEventListener("click", () => {
      // Reset erreurs
      errForme.classList.remove("visible");
      errNomSociete.classList.remove("visible");
      errSocCree.classList.remove("visible");
      errSiren.classList.remove("visible");

      let isValid2 = true;

      // Vérif forme juridique
      if (!formeJuridique.value.trim()) {
        errForme.textContent = "Ce champ est requis";
        errForme.classList.add("visible");
        isValid2 = false;
      }
      // Vérif nom
      if (!nomSociete.value.trim()) {
        errNomSociete.textContent = "Ce champ est requis";
        errNomSociete.classList.add("visible");
        isValid2 = false;
      }

      // Vérif radio
      let checkedRadioValue = null;
      for (let r of radios) {
        if (r.checked) {
          checkedRadioValue = r.value;
          break;
        }
      }
      if (!checkedRadioValue) {
        errSocCree.textContent = "Veuillez sélectionner une option";
        errSocCree.classList.add("visible");
        isValid2 = false;
      }

      // Si "oui", le numéro de SIREN est obligatoire
      if (checkedRadioValue === "oui") {
        if (!numSiren.value.trim()) {
          errSiren.textContent = "Vous devez renseigner votre numéro de SIREN";
          errSiren.classList.add("visible");
          isValid2 = false;
        }
      }

      if (isValid2) {
        alert("Étape 2 validée – aller à l'étape 3 !");
        // goToStep(3);
      }
    });

    // Appliquer un styling direct au select pour garantir l'alignement à gauche
    document.addEventListener('DOMContentLoaded', function() {
      const selectElement = document.getElementById('forme-juridique');
      selectElement.style.textAlign = 'left';
      selectElement.style.textAlignLast = 'left';
    });
  </script>
</body>
</html>
